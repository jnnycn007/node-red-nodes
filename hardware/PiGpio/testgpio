#!/bin/bash

python_cmd=python3

revision=$(awk -F': ' '/^Revision/ {print $2; exit}' /proc/cpuinfo)
if [[ -n "$revision" && ${#revision} -eq 4 ]]; then
    export RPI_LGPIO_REVISION="800012"
fi

# Fallback to Python 2, if Python 3 is not available
command -v python3 > /dev/null || python_cmd=python

BASEDIR=$(dirname $0)
$python_cmd -u $BASEDIR/testgpio.py $@
